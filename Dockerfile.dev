# Dockerfile para desarrollo con hot reload
FROM node:20-alpine AS dev

WORKDIR /app

# Copiar dependencias
COPY package.json yarn.lock ./
RUN yarn install

# Instalar nodemon y nestjs/cli globalmente
RUN yarn global add nodemon @nestjs/cli

# Copiar el resto del c√≥digo
COPY . .

# Exponer el puerto de la app
EXPOSE ${PORT}

# Comando para desarrollo con hot reload
CMD ["nodemon", "--watch", "src", "--exec", "nest", "start", "--watch"]
